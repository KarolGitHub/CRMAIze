<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0{% block viewport_extra %}{% endblock %}">
		{% block meta_tags %}
			<meta name="theme-color" content="#1779ba">
			<meta name="apple-mobile-web-app-capable" content="yes">
			<meta name="apple-mobile-web-app-status-bar-style" content="default">
			<meta name="apple-mobile-web-app-title" content="CRMAIze">
			<meta name="mobile-web-app-capable" content="yes">
			<meta name="application-name" content="CRMAIze">
		{% endblock %}
		<title>
			{% block title %}CRMAIze
			{% endblock %}
		</title>

		<!-- Favicon -->
		<link rel="icon" type="image/svg+xml" href="/favicon.svg">
		<link rel="icon" type="image/x-icon" href="/favicon.ico">
		<link
		rel="apple-touch-icon" href="/favicon.svg">

		<!-- PWA Manifest -->
		<link
		rel="manifest" href="/manifest.json">

		<!-- Apple Touch Icons -->
		<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
		<link
		rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">

		<!-- Stylesheets -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/foundation-sites@6.7.5/dist/css/foundation.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
		<link rel="stylesheet" href="/assets/css/mobile.css">

		<style>
			/* Enhanced Navigation Styling */
			.top-bar {
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				border-bottom: 3px solid rgba(255, 255, 255, 0.1);
			}

			.top-bar .menu > li > a {
				color: rgba(255, 255, 255, 0.9);
				transition: all 0.3s ease;
				border-radius: 4px;
				margin: 0 2px;
			}

			.top-bar .menu > li > a:hover {
				background: rgba(255, 255, 255, 0.1);
				color: white;
			}

			.top-bar .menu > li.is-active > a {
				background: rgba(255, 255, 255, 0.2);
				color: white;
				font-weight: bold;
			}

			.top-bar .menu-text {
				color: white;
				font-size: 1.1rem;
			}

			.top-bar .label {
				font-size: 0.7rem;
				margin-left: 0.5rem;
			}

			/* Main content spacing */
			main {
				padding-top: 1rem;
				min-height: calc(100vh - 60px);
			}

			/* Mobile responsive */
			@media screen and(max-width: 640px) {
				.top-bar .menu > li > a {
					padding: 0.5rem;
					font-size: 0.9rem;
				}

				.top-bar .menu-text strong {
					font-size: 1rem;
				}
			}
		</style>

		{% block head %}{% endblock %}
	</head>
	<body>
		<!-- Navigation -->
		<div class="top-bar sticky" data-sticky data-margin-top="0">
			<div class="top-bar-left">
				<ul class="menu">
					<li class="menu-text">
						<strong>
							<i class="fas fa-brain"></i>
							CRMAIze</strong>
					</li>
					<li {% if current_page == 'dashboard' %} class="is-active" {% endif %}>
						<a href="/">
							<i class="fas fa-tachometer-alt"></i>
							Dashboard</a>
					</li>
					<li {% if current_page == 'campaigns' %} class="is-active" {% endif %}>
						<a href="/campaigns">
							<i class="fas fa-envelope"></i>
							Campaigns</a>
					</li>
					<li {% if current_page == 'create_campaign' %} class="is-active" {% endif %}>
						<a href="/campaigns/create">
							<i class="fas fa-plus"></i>
							Create</a>
					</li>
					<li {% if current_page == 'analytics' %} class="is-active" {% endif %}>
						<a href="/analytics">
							<i class="fas fa-chart-bar"></i>
							Analytics</a>
					</li>
					{% if user and user.role == 'admin' %}
						<li {% if current_page == 'email_settings' %} class="is-active" {% endif %}>
							<a href="/email-settings">
								<i class="fas fa-cog"></i>
								Email Settings</a>
						</li>
						<li {% if current_page == 'data_import_export' %} class="is-active" {% endif %}>
							<a href="/data-import-export">
								<i class="fas fa-file-csv"></i>
								Import/Export</a>
						</li>
					{% endif %}
				</ul>
			</div>
			<div class="top-bar-right">
				<ul class="menu">
					{% if user %}
						<li class="menu-text">
							<i class="fas fa-user"></i>
							Welcome,
							<strong>{{ user.username }}</strong>!
							{% if user.role == 'admin' %}
								<span class="label warning">Admin</span>
							{% else %}
								<span class="label primary">{{ user.role|title }}</span>
							{% endif %}
						</li>
						<li>
							<a href="/logout">
								<i class="fas fa-sign-out-alt"></i>
								Logout</a>
						</li>
					{% else %}
						<li>
							<a href="/login">
								<i class="fas fa-sign-in-alt"></i>
								Login</a>
						</li>
					{% endif %}
				</ul>
			</div>
		</div>

		<!-- Main Content -->
		<main>
			{% block content %}{% endblock %}
		</main>

		<!-- Scripts -->
		<!-- jQuery (required for Foundation) -->
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/foundation-sites@6.7.5/dist/js/foundation.min.js"></script>
		<script>
			$(document).foundation();
		</script>

		<!-- PWA Scripts -->
		<script src="/assets/js/pwa.js"></script>

		{% block scripts %}{% endblock %}
	</body>
</html>
